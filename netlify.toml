[build]
command = "npm run build"
publish = "build/client"
functions = "build/server"

[build.environment]
NODE_VERSION = "20.11.0"

[dev]
command = "npm run dev"
port = 8002

[[headers]]
for = "/build/*"
[headers.values]
"Cache-Control" = "public, max-age=31536000, immutable"

[functions]
node_bundler = "esbuild"
external_node_modules = ["@remix-run/cloudflare"]

[[redirects]]
from = "/*"
to = "/.netlify/functions/server"
status = 200

[[redirects]]
from = "/_remix/*"
to = "/_remix/*"
status = 200
